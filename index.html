<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="POTD Analysis">
    <meta name="author" content="Yoav Zimmerman">

    <title>Pizza of the Day</title>

    <link href='http://fonts.googleapis.com/css?family=Maven+Pro:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="css/style.css">

  </head>

  <body>

    <div class="container">

      <h1>Pizza of the Day</h1>

      <p><i>Disclaimer: I am not affiliated with 800 Degree's Pizza in any way</i></p>

      <div class="section">
        <h2>Introduction</h2>
        <p>Everybody loves pizza, myself included. And recently, a few friends and I have been eating more pizza than we ever have in our lives. Let me explain: <a href="http://www.800degreespizza.com/">800 Degrees Pizza</a> is Westwood's beloved local "build-your-own" pizza spot. It is regarded by UCLA students as "our best pizza", which in a school with <a href="http://dailybruin.com/2015/01/28/pieology-to-take-a-slice-of-westwoods-competitive-pizza-market/">extremely stiff pizza competition</a>, is not an opinion to be taken lightly. Of course, the superior quality of ingredients will cost you more than your average Domino's pizza, anywhere from $10-15 for a meal.</p>
        <p>Now here's where it gets interesting: Since July 2014, 800 Degrees has been offering a deal they call the <i>Instagram Special</i>. Every day, their instagram account posts a picture of a pizza which will be <strong>50% off</strong> for the day, which usually ends up being somewhere in the range of $4-5. It didn't take me long to become a habitual checker of instagram every day between the hours of 10 AM to 12 PM, when the <i>POTD</i> was usually posted by the 800 Degrees instagram account. Some days you'd get your average brocollini and mushrooms on margherita. Other days, you'd hit the jackpot with bacon, rosemary ham,  or my personal favorite, the legendary <a href="http://en.wikipedia.org/wiki/Peppadew">peppadew pepper</a> on Bianca.</p>
        <p>I quickly became interested in how the POTD was picked every day. Who decided on the daily ingredients and what was their criteria for choosing them? Was a pattern behind the ingredients? Most importantly, was there some way to predict the pizza of the day before it was posted? This is the ultimate goal of this project.</p>
      </div>
      
      <div class="section">
        <h2>Getting the Data</h2>
        <p>Since the entire history of POTD is documented on social networks, getting the data consists of a few calls to the instagram API. From there, one can tokenize the description of each post and search for matches to the ingredients publicized on the <a href="http://www.800degreespizza.com/menu/">800 Degrees Menu</a>. A few special considerations have to be taken into account, such as ingredients that have identical words ("red onion" and "carmelized onion") and pluralization. This technique isn't perfect, but after some tweaking I was able to come up with a reasonably accurate history model of POTD.</p>
      </div>

      <div class="section">
        <h2>Base Frequency</h2>
        <p>Now that I had a full history of the pizza of the day, I could start generating some graphs to visualize the data. Using the <a href="http://www.chartjs.org/">ChartJS</a> library, it's easier than ever to generate nice looking graphs! First, let's examine the "base"- the cheese and sauce type that forms the core of the pizza. Only one can be chosen per pizza.</p>
        <div id="base-overall">
          <canvas class="graph"></canvas>
          <div class="legend">
            <div class="legend-scale"></div>
          </div>
          <p>OK, so we already see a trend that suggests a nonrandom distribution: Marinara seems to be far less chosen for the <i>POTD</i> then the other bases. Still, this is not too surprising. Marinara is the least favorite base amongst most 800 Degrees fans I know due to it's alarming lack of cheese.</p>
        </div>

        <div id="base-by-month">
          <h3>Base Frequency (by month)</h3>
          <canvas class="graph"></canvas>
          <div class="legend">
            <div class="legend-scale"></div>
          </div>
          <p>Most months have a similar base frequency distribution to the overall base frequency distribution. There's nothing too interesting we can use for prediction here.</p>
        </div>

        <div id="base-by-weekday">
          <h3>Base Frequency (by weekday)</h3>
          <canvas class="graph"></canvas>
          <div class="legend">
            <div class="legend-scale"></div>
          </div>
          <p>Breaking down the base frequency by weekdays is a little more interesting. Tuesday has featured a Bianca base 50% of the time, as opposed to an overall ~26% frequency for Bianca. Still, this is probably not significant due to the relatively small number of data points we're dealing with.</p>
        </div>
      </div>

      <div class="section">
        <h2>Toppings</h2>
        <p>Toppings are vital to all pizza's. Historically, a <i>POTD</i> can feature anywhere from one to four toppings. On the 800 Degree menu they're grouped into three categories: Proteins, Cheeses, and Vegetables. For now, let's lump all of those together.</p>
        <div id="toppings-overall">
          <h3>Topping Frequency</h3>
          <canvas class="graph"></canvas>
          <p>The above graph rules out a completely random algorithm to select the <i>POTD</i>, as clearly some ingredients are favored over others. My guess would be that these toppings are less popular among regular customers and 800 Degree's locations usually have a surplus.</p>
          <p>Another interesting metric is to look at combination frequencies. The following two graphs take a look at topping-topping and topping-base frequencies, respectively.</p>
        </div>

        <div id="topping-pairings">
          <h3>Topping-Topping Pair Frequency</h3>
          <canvas class="graph"></canvas>
        </div>

        <div id="base-topping-pairings">
          <h3>Topping-Base Pair Frequency</h3>
          <canvas class="graph"></canvas>
        </div>

    </div>

    <div class="section">
      <h2>Prediction</h2>
      <p>After experimenting with a few machine learning algorithms with scikit-learn, I wasn't able to find any prediction models of significant accuracy. I welcome any data wizards to try out experimenting with the <a href="data/pizzas.json">dataset</a>, but it may that we just have too few data points. Still, we can at least derive some insight from the graphs above. And we still have a few more data points to consider...</p>
    </div>

    <div class="section">
      <h2>Likes</h2>
      <p>Instagram</p> 
      <div id="ingredients-likes">
        <h3>Average Likes per Ingredient</h3>
        <canvas class="graph"></canvas>
      </div>

      <div id="likes-by-weekday">
        <h3>Average Likes by Weekday</h3>
        <canvas class="graph"></canvas>
      </div>
    </div>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery-1.11.2.min.js"></script>
    <script src="js/Chart.min.js"></script>
    <script src="js/main.js"></script>
    
  </body>
</html>
